{"ast":null,"code":"export const transformMessage = message => {\n  var _message$parent_id;\n  console.log('Transforming message:', message);\n\n  // Ensure reactions is an array and filter out invalid reactions\n  const reactions = Array.isArray(message.reactions) ? message.reactions.filter(reaction => {\n    if (!reaction || typeof reaction !== 'object') {\n      console.warn('Invalid reaction object:', reaction);\n      return false;\n    }\n    if (!reaction.userId || !reaction.emoji) {\n      console.warn('Reaction missing required fields:', reaction);\n      return false;\n    }\n    return true;\n  }) : [];\n  console.log('Transformed reactions:', reactions);\n  return {\n    id: message.id.toString(),\n    content: message.content,\n    userId: message.sender_id.toString(),\n    channelId: message.channel_id.toString(),\n    createdAt: message.created_at,\n    updatedAt: message.updated_at || message.created_at,\n    parentId: (_message$parent_id = message.parent_id) === null || _message$parent_id === void 0 ? void 0 : _message$parent_id.toString(),\n    reactions,\n    replyCount: message.reply_count || 0,\n    isExpanded: false,\n    repliesLoaded: false,\n    attachments: Array.isArray(message.attachments) ? message.attachments : []\n  };\n};","map":{"version":3,"names":["transformMessage","message","_message$parent_id","console","log","reactions","Array","isArray","filter","reaction","warn","userId","emoji","id","toString","content","sender_id","channelId","channel_id","createdAt","created_at","updatedAt","updated_at","parentId","parent_id","replyCount","reply_count","isExpanded","repliesLoaded","attachments"],"sources":["Z:/GAUNTLET/projects/SERMO/sermo-app/frontend/src/utils/messageTransform.ts"],"sourcesContent":["import { RawMessage, StoreMessage, Reaction } from '../types';\n\nexport const transformMessage = (message: RawMessage): StoreMessage => {\n  console.log('Transforming message:', message);\n  \n  // Ensure reactions is an array and filter out invalid reactions\n  const reactions = Array.isArray(message.reactions) \n    ? message.reactions.filter((reaction): reaction is Reaction => {\n        if (!reaction || typeof reaction !== 'object') {\n          console.warn('Invalid reaction object:', reaction);\n          return false;\n        }\n        if (!reaction.userId || !reaction.emoji) {\n          console.warn('Reaction missing required fields:', reaction);\n          return false;\n        }\n        return true;\n      })\n    : [];\n\n  console.log('Transformed reactions:', reactions);\n\n  return {\n    id: message.id.toString(),\n    content: message.content,\n    userId: message.sender_id.toString(),\n    channelId: message.channel_id.toString(),\n    createdAt: message.created_at,\n    updatedAt: message.updated_at || message.created_at,\n    parentId: message.parent_id?.toString(),\n    reactions,\n    replyCount: message.reply_count || 0,\n    isExpanded: false,\n    repliesLoaded: false,\n    attachments: Array.isArray(message.attachments) ? message.attachments : []\n  };\n}; "],"mappings":"AAEA,OAAO,MAAMA,gBAAgB,GAAIC,OAAmB,IAAmB;EAAA,IAAAC,kBAAA;EACrEC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEH,OAAO,CAAC;;EAE7C;EACA,MAAMI,SAAS,GAAGC,KAAK,CAACC,OAAO,CAACN,OAAO,CAACI,SAAS,CAAC,GAC9CJ,OAAO,CAACI,SAAS,CAACG,MAAM,CAAEC,QAAQ,IAA2B;IAC3D,IAAI,CAACA,QAAQ,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;MAC7CN,OAAO,CAACO,IAAI,CAAC,0BAA0B,EAAED,QAAQ,CAAC;MAClD,OAAO,KAAK;IACd;IACA,IAAI,CAACA,QAAQ,CAACE,MAAM,IAAI,CAACF,QAAQ,CAACG,KAAK,EAAE;MACvCT,OAAO,CAACO,IAAI,CAAC,mCAAmC,EAAED,QAAQ,CAAC;MAC3D,OAAO,KAAK;IACd;IACA,OAAO,IAAI;EACb,CAAC,CAAC,GACF,EAAE;EAENN,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEC,SAAS,CAAC;EAEhD,OAAO;IACLQ,EAAE,EAAEZ,OAAO,CAACY,EAAE,CAACC,QAAQ,CAAC,CAAC;IACzBC,OAAO,EAAEd,OAAO,CAACc,OAAO;IACxBJ,MAAM,EAAEV,OAAO,CAACe,SAAS,CAACF,QAAQ,CAAC,CAAC;IACpCG,SAAS,EAAEhB,OAAO,CAACiB,UAAU,CAACJ,QAAQ,CAAC,CAAC;IACxCK,SAAS,EAAElB,OAAO,CAACmB,UAAU;IAC7BC,SAAS,EAAEpB,OAAO,CAACqB,UAAU,IAAIrB,OAAO,CAACmB,UAAU;IACnDG,QAAQ,GAAArB,kBAAA,GAAED,OAAO,CAACuB,SAAS,cAAAtB,kBAAA,uBAAjBA,kBAAA,CAAmBY,QAAQ,CAAC,CAAC;IACvCT,SAAS;IACToB,UAAU,EAAExB,OAAO,CAACyB,WAAW,IAAI,CAAC;IACpCC,UAAU,EAAE,KAAK;IACjBC,aAAa,EAAE,KAAK;IACpBC,WAAW,EAAEvB,KAAK,CAACC,OAAO,CAACN,OAAO,CAAC4B,WAAW,CAAC,GAAG5B,OAAO,CAAC4B,WAAW,GAAG;EAC1E,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}