{"ast":null,"code":"var _jsxFileName = \"Z:\\\\GAUNTLET\\\\projects\\\\SERMO\\\\sermo-app\\\\frontend\\\\src\\\\components\\\\chat\\\\MessageReplies\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'react-redux';\nimport ChatMessage from '../../common/ChatMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RepliesContainer = styled.div`\n  display: ${props => props.isExpanded ? 'block' : 'none'};\n  margin-left: ${props => (props.depth || 1) * 24}px;\n  position: relative;\n  border-left: 2px solid ${props => props.theme.colors.border};\n  margin-top: 2px;\n  margin-bottom: 2px;\n  padding-left: 8px;\n\n  &:before {\n    content: '';\n    position: absolute;\n    left: -2px;\n    top: 0;\n    width: 8px;\n    height: 2px;\n    background-color: ${props => props.theme.colors.border};\n  }\n`;\n_c = RepliesContainer;\nconst ReplyWrapper = styled.div`\n  position: relative;\n  padding: 2px 0;\n  background-color: ${props => props.theme.colors.backgroundDark};\n\n  &:hover {\n    background-color: ${props => props.theme.colors.hover};\n  }\n\n  &:last-child {\n    &:after {\n      content: '';\n      position: absolute;\n      left: -10px;\n      bottom: 50%;\n      width: 8px;\n      height: 2px;\n      background-color: ${props => props.theme.colors.border};\n    }\n  }\n`;\n_c2 = ReplyWrapper;\nconst MessageReplies = ({\n  parentId,\n  replies,\n  isExpanded,\n  onToggleReplies,\n  onDelete,\n  onReply,\n  currentUserId,\n  depth = 1\n}) => {\n  _s();\n  const users = useSelector(state => {\n    var _state$chat;\n    return ((_state$chat = state.chat) === null || _state$chat === void 0 ? void 0 : _state$chat.users) || {};\n  });\n  const messages = useSelector(state => {\n    var _state$messages, _replies$;\n    return ((_state$messages = state.messages) === null || _state$messages === void 0 ? void 0 : _state$messages.messagesByChannel[((_replies$ = replies[0]) === null || _replies$ === void 0 ? void 0 : _replies$.channelId) || '']) || [];\n  });\n\n  // Get nested replies for each reply\n  const getNestedReplies = messageId => messages.filter(m => m.parentId === messageId);\n  return /*#__PURE__*/_jsxDEV(RepliesContainer, {\n    isExpanded: isExpanded,\n    depth: depth,\n    children: replies.map(reply => {\n      var _users$reply$userId;\n      const nestedReplies = getNestedReplies(reply.id);\n      return /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ReplyWrapper, {\n          children: /*#__PURE__*/_jsxDEV(ChatMessage, {\n            content: reply.content,\n            sender: ((_users$reply$userId = users[reply.userId]) === null || _users$reply$userId === void 0 ? void 0 : _users$reply$userId.username) || reply.userId,\n            timestamp: reply.createdAt,\n            userId: reply.userId,\n            currentUserId: currentUserId,\n            onDelete: () => onDelete(reply.id),\n            replyCount: nestedReplies.length,\n            isExpanded: reply.isExpanded || false,\n            onToggleReplies: () => onToggleReplies(reply.id),\n            onReply: () => onReply(reply),\n            isReply: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), nestedReplies.length > 0 && /*#__PURE__*/_jsxDEV(MessageReplies, {\n          parentId: reply.id,\n          replies: nestedReplies,\n          isExpanded: reply.isExpanded || false,\n          onToggleReplies: onToggleReplies,\n          onDelete: onDelete,\n          onReply: onReply,\n          currentUserId: currentUserId,\n          depth: depth + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this)]\n      }, reply.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(MessageReplies, \"bf2yPIB0Ms62xgnivwcXolvVJBc=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c3 = MessageReplies;\nexport default MessageReplies;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"RepliesContainer\");\n$RefreshReg$(_c2, \"ReplyWrapper\");\n$RefreshReg$(_c3, \"MessageReplies\");","map":{"version":3,"names":["React","styled","useSelector","ChatMessage","jsxDEV","_jsxDEV","RepliesContainer","div","props","isExpanded","depth","theme","colors","border","_c","ReplyWrapper","backgroundDark","hover","_c2","MessageReplies","parentId","replies","onToggleReplies","onDelete","onReply","currentUserId","_s","users","state","_state$chat","chat","messages","_state$messages","_replies$","messagesByChannel","channelId","getNestedReplies","messageId","filter","m","children","map","reply","_users$reply$userId","nestedReplies","id","Fragment","content","sender","userId","username","timestamp","createdAt","replyCount","length","isReply","fileName","_jsxFileName","lineNumber","columnNumber","_c3","$RefreshReg$"],"sources":["Z:/GAUNTLET/projects/SERMO/sermo-app/frontend/src/components/chat/MessageReplies/index.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'react-redux';\nimport { StoreMessage, RootState } from '../../../types';\nimport ChatMessage from '../../common/ChatMessage';\n\ninterface MessageRepliesProps {\n  parentId: string;\n  replies: StoreMessage[];\n  isExpanded: boolean;\n  onToggleReplies: (messageId: string) => void;\n  onDelete: (messageId: string) => void;\n  onReply: (message: StoreMessage) => void;\n  currentUserId?: string;\n  depth?: number;\n}\n\nconst RepliesContainer = styled.div<{ isExpanded: boolean; depth?: number }>`\n  display: ${props => props.isExpanded ? 'block' : 'none'};\n  margin-left: ${props => (props.depth || 1) * 24}px;\n  position: relative;\n  border-left: 2px solid ${props => props.theme.colors.border};\n  margin-top: 2px;\n  margin-bottom: 2px;\n  padding-left: 8px;\n\n  &:before {\n    content: '';\n    position: absolute;\n    left: -2px;\n    top: 0;\n    width: 8px;\n    height: 2px;\n    background-color: ${props => props.theme.colors.border};\n  }\n`;\n\nconst ReplyWrapper = styled.div`\n  position: relative;\n  padding: 2px 0;\n  background-color: ${props => props.theme.colors.backgroundDark};\n\n  &:hover {\n    background-color: ${props => props.theme.colors.hover};\n  }\n\n  &:last-child {\n    &:after {\n      content: '';\n      position: absolute;\n      left: -10px;\n      bottom: 50%;\n      width: 8px;\n      height: 2px;\n      background-color: ${props => props.theme.colors.border};\n    }\n  }\n`;\n\nconst MessageReplies: React.FC<MessageRepliesProps> = ({\n  parentId,\n  replies,\n  isExpanded,\n  onToggleReplies,\n  onDelete,\n  onReply,\n  currentUserId,\n  depth = 1,\n}) => {\n  const users = useSelector((state: RootState) => state.chat?.users || {});\n  const messages = useSelector((state: RootState) => \n    state.messages?.messagesByChannel[replies[0]?.channelId || ''] || []\n  );\n\n  // Get nested replies for each reply\n  const getNestedReplies = (messageId: string) => \n    messages.filter(m => m.parentId === messageId);\n\n  return (\n    <RepliesContainer isExpanded={isExpanded} depth={depth}>\n      {replies.map((reply) => {\n        const nestedReplies = getNestedReplies(reply.id);\n        \n        return (\n          <React.Fragment key={reply.id}>\n            <ReplyWrapper>\n              <ChatMessage\n                content={reply.content}\n                sender={users[reply.userId]?.username || reply.userId}\n                timestamp={reply.createdAt}\n                userId={reply.userId}\n                currentUserId={currentUserId}\n                onDelete={() => onDelete(reply.id)}\n                replyCount={nestedReplies.length}\n                isExpanded={reply.isExpanded || false}\n                onToggleReplies={() => onToggleReplies(reply.id)}\n                onReply={() => onReply(reply)}\n                isReply\n              />\n            </ReplyWrapper>\n            {nestedReplies.length > 0 && (\n              <MessageReplies\n                parentId={reply.id}\n                replies={nestedReplies}\n                isExpanded={reply.isExpanded || false}\n                onToggleReplies={onToggleReplies}\n                onDelete={onDelete}\n                onReply={onReply}\n                currentUserId={currentUserId}\n                depth={depth + 1}\n              />\n            )}\n          </React.Fragment>\n        );\n      })}\n    </RepliesContainer>\n  );\n};\n\nexport default MessageReplies; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}