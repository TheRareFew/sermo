{"ast":null,"code":"import { apiRequest } from './utils';\n// Transform API user to our User type\nconst transformUser = apiUser => ({\n  ...apiUser,\n  email: '',\n  // Set default values for required fields that the channel API doesn't provide\n  full_name: apiUser.username // Use username as full_name if not provided\n});\nexport const getChannels = async () => {\n  console.log('Fetching channels...');\n  try {\n    const channels = await apiRequest('/api/channels');\n    console.log('Received channels:', channels);\n    return channels;\n  } catch (error) {\n    console.error('Error fetching channels:', error);\n    throw error;\n  }\n};\nexport const getChannelMessages = async (channelId, limit = 50) => {\n  console.log('=== Fetching Messages ===');\n  console.log(`Channel ID: ${channelId}`);\n  console.log(`Limit: ${limit}`);\n  console.log(`URL: /api/channels/${channelId}/messages?limit=${limit}`);\n  try {\n    console.log('Making API request...');\n    const messages = await apiRequest(`/api/channels/${channelId}/messages?limit=${limit}`);\n    console.log('API Response:', messages);\n    console.log(`Received ${(messages === null || messages === void 0 ? void 0 : messages.length) || 0} messages`);\n    if ((messages === null || messages === void 0 ? void 0 : messages.length) > 0) {\n      console.log('First message:', messages[0]);\n      console.log('Last message:', messages[messages.length - 1]);\n    }\n    return messages;\n  } catch (error) {\n    console.error('=== Error Fetching Messages ===');\n    console.error('Error details:', error);\n    console.error('Request details:', {\n      channelId,\n      limit,\n      url: `/api/channels/${channelId}/messages?limit=${limit}`\n    });\n    throw error;\n  }\n};\nexport const getChannelUsers = async channelId => {\n  console.log(`Fetching users for channel ${channelId}...`);\n  try {\n    const apiUsers = await apiRequest(`/api/channels/${channelId}/users`);\n    console.log('Received users:', apiUsers);\n    const users = apiUsers.map(transformUser);\n    console.log('Transformed users:', users);\n    return users;\n  } catch (error) {\n    console.error(`Error fetching users for channel ${channelId}:`, error);\n    throw error;\n  }\n};\nexport const createChannel = async (name, description) => {\n  console.log('Creating channel:', {\n    name,\n    description\n  });\n  try {\n    const channel = await apiRequest('/api/channels', {\n      method: 'POST',\n      body: JSON.stringify({\n        name,\n        description\n      })\n    });\n    console.log('Created channel:', channel);\n    return channel;\n  } catch (error) {\n    console.error('Error creating channel:', error);\n    throw error;\n  }\n};\nexport const joinChannel = async channelId => {\n  console.log(`Joining channel ${channelId}...`);\n  try {\n    await apiRequest(`/api/channels/${channelId}/join`, {\n      method: 'POST'\n    });\n    console.log(`Joined channel ${channelId}`);\n  } catch (error) {\n    console.error(`Error joining channel ${channelId}:`, error);\n    throw error;\n  }\n};\nexport const leaveChannel = async channelId => {\n  console.log(`Leaving channel ${channelId}...`);\n  try {\n    await apiRequest(`/api/channels/${channelId}/leave`, {\n      method: 'POST'\n    });\n    console.log(`Left channel ${channelId}`);\n  } catch (error) {\n    console.error(`Error leaving channel ${channelId}:`, error);\n    throw error;\n  }\n};\nexport const sendMessage = async (channelId, content) => {\n  console.log(`Sending message to channel ${channelId}:`, content);\n  try {\n    const message = await apiRequest(`/api/channels/${channelId}/messages`, {\n      method: 'POST',\n      body: JSON.stringify({\n        content\n      })\n    });\n    console.log('Message sent:', message);\n    return {\n      id: message.id,\n      content: message.content,\n      sender_id: message.sender_id,\n      channel_id: message.channel_id,\n      created_at: message.created_at,\n      is_system: message.is_system\n    };\n  } catch (error) {\n    console.error(`Error sending message to channel ${channelId}:`, error);\n    throw error;\n  }\n};","map":{"version":3,"names":["apiRequest","transformUser","apiUser","email","full_name","username","getChannels","console","log","channels","error","getChannelMessages","channelId","limit","messages","length","url","getChannelUsers","apiUsers","users","map","createChannel","name","description","channel","method","body","JSON","stringify","joinChannel","leaveChannel","sendMessage","content","message","id","sender_id","channel_id","created_at","is_system"],"sources":["Z:/GAUNTLET/projects/SERMO/sermo-app/frontend/src/services/api/chat.ts"],"sourcesContent":["import { Channel, Message, User } from '../../types';\r\nimport { apiRequest } from './utils';\r\n\r\ninterface ApiUser {\r\n  id: number;\r\n  username: string;\r\n  status: 'online' | 'offline' | 'away' | 'busy';\r\n  last_seen: string;\r\n}\r\n\r\n// Transform API user to our User type\r\nconst transformUser = (apiUser: ApiUser): User => ({\r\n  ...apiUser,\r\n  email: '', // Set default values for required fields that the channel API doesn't provide\r\n  full_name: apiUser.username, // Use username as full_name if not provided\r\n});\r\n\r\nexport const getChannels = async (): Promise<Channel[]> => {\r\n  console.log('Fetching channels...');\r\n  try {\r\n    const channels = await apiRequest<Channel[]>('/api/channels');\r\n    console.log('Received channels:', channels);\r\n    return channels;\r\n  } catch (error) {\r\n    console.error('Error fetching channels:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getChannelMessages = async (channelId: number, limit: number = 50): Promise<Message[]> => {\r\n  console.log('=== Fetching Messages ===');\r\n  console.log(`Channel ID: ${channelId}`);\r\n  console.log(`Limit: ${limit}`);\r\n  console.log(`URL: /api/channels/${channelId}/messages?limit=${limit}`);\r\n  \r\n  try {\r\n    console.log('Making API request...');\r\n    const messages = await apiRequest<Message[]>(`/api/channels/${channelId}/messages?limit=${limit}`);\r\n    console.log('API Response:', messages);\r\n    console.log(`Received ${messages?.length || 0} messages`);\r\n    if (messages?.length > 0) {\r\n      console.log('First message:', messages[0]);\r\n      console.log('Last message:', messages[messages.length - 1]);\r\n    }\r\n    return messages;\r\n  } catch (error) {\r\n    console.error('=== Error Fetching Messages ===');\r\n    console.error('Error details:', error);\r\n    console.error('Request details:', {\r\n      channelId,\r\n      limit,\r\n      url: `/api/channels/${channelId}/messages?limit=${limit}`\r\n    });\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getChannelUsers = async (channelId: number): Promise<User[]> => {\r\n  console.log(`Fetching users for channel ${channelId}...`);\r\n  try {\r\n    const apiUsers = await apiRequest<ApiUser[]>(`/api/channels/${channelId}/users`);\r\n    console.log('Received users:', apiUsers);\r\n    const users = apiUsers.map(transformUser);\r\n    console.log('Transformed users:', users);\r\n    return users;\r\n  } catch (error) {\r\n    console.error(`Error fetching users for channel ${channelId}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createChannel = async (name: string, description?: string): Promise<Channel> => {\r\n  console.log('Creating channel:', { name, description });\r\n  try {\r\n    const channel = await apiRequest<Channel>('/api/channels', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ name, description }),\r\n    });\r\n    console.log('Created channel:', channel);\r\n    return channel;\r\n  } catch (error) {\r\n    console.error('Error creating channel:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const joinChannel = async (channelId: number): Promise<void> => {\r\n  console.log(`Joining channel ${channelId}...`);\r\n  try {\r\n    await apiRequest(`/api/channels/${channelId}/join`, {\r\n      method: 'POST',\r\n    });\r\n    console.log(`Joined channel ${channelId}`);\r\n  } catch (error) {\r\n    console.error(`Error joining channel ${channelId}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const leaveChannel = async (channelId: number): Promise<void> => {\r\n  console.log(`Leaving channel ${channelId}...`);\r\n  try {\r\n    await apiRequest(`/api/channels/${channelId}/leave`, {\r\n      method: 'POST',\r\n    });\r\n    console.log(`Left channel ${channelId}`);\r\n  } catch (error) {\r\n    console.error(`Error leaving channel ${channelId}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const sendMessage = async (channelId: number, content: string): Promise<Message> => {\r\n  console.log(`Sending message to channel ${channelId}:`, content);\r\n  try {\r\n    const message = await apiRequest<Message>(`/api/channels/${channelId}/messages`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ content }),\r\n    });\r\n    console.log('Message sent:', message);\r\n    return {\r\n      id: message.id,\r\n      content: message.content,\r\n      sender_id: message.sender_id,\r\n      channel_id: message.channel_id,\r\n      created_at: message.created_at,\r\n      is_system: message.is_system\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error sending message to channel ${channelId}:`, error);\r\n    throw error;\r\n  }\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}